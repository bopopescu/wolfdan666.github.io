<!-- build time:Sun Dec 15 2019 16:29:39 GMT+0800 (GMT+08:00) --><!DOCTYPE html><html class="theme-next pisces use-motion" lang="zh-Hans"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#222"><script src="//cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><link href="//cdn.jsdelivr.net/npm/pace-js@1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="https://fonts.loli.net/css?family=EB+Garamond:400,400i,700,700i|Noto+Serif+SC:400,500,700&display=swap&subset=chinese-simplified" rel="stylesheet"><link href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4"><link rel="icon" type="image/png" sizes="32x32" href="/favicon32.ico?v=5.1.4"><link rel="icon" type="image/png" sizes="16x16" href="/favicon16.ico?v=5.1.4"><link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222"><meta name="keywords" content="ARST,"><link rel="alternate" href="/atom.xml" title="单林敏的博客" type="application/atom+xml"><meta name="description" content="ARST打卡 基于上下文的自适应算术编码代码实现 完全统计模型的算术编码代码实现 无限长不报错版"><meta name="keywords" content="ARST"><meta property="og:type" content="article"><meta property="og:title" content="ARST打卡第二周(2&#x2F;521)"><meta property="og:url" content="https://www.wolfdan.cn/ARST打卡第二周-2-521/index.html"><meta property="og:site_name" content="单林敏的博客"><meta property="og:description" content="ARST打卡 基于上下文的自适应算术编码代码实现 完全统计模型的算术编码代码实现 无限长不报错版"><meta property="og:locale" content="zh-Hans"><meta property="og:updated_time" content="2019-11-30T06:18:24.142Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="ARST打卡第二周(2&#x2F;521)"><meta name="twitter:description" content="ARST打卡 基于上下文的自适应算术编码代码实现 完全统计模型的算术编码代码实现 无限长不报错版"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Pisces",version:"5.1.4",sidebar:{position:"left",display:"post",offset:12,b2t:!1,scrollpercent:!0,onmobile:!0},fancybox:!0,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"flipYIn",post_header:"perspectiveRightIn",post_body:"perspectiveLeftIn",coll_header:"perspectiveDownIn",sidebar:"perspectiveUpIn"}},duoshuo:{userId:"0",author:"博主"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><link rel="canonical" href="https://www.wolfdan.cn/ARST打卡第二周-2-521/"><script></script><title>ARST打卡第二周(2/521) | 单林敏的博客</title><script type="text/javascript">var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?953c0cc2db0f1124313d72b95b9d07e1";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">单林敏的博客</span> <span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">wolfdan's blog</h1></div><div class="site-nav-toggle"><button><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-站点信息"><a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br>站点信息</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档</a></li><li class="menu-item menu-item-捐赠"><a href="/捐赠/" rel="section"><i class="menu-item-icon fa fa-fw fa-money"></i><br>捐赠</a></li><li class="menu-item menu-item-links"><a href="/links/" rel="section"><i class="menu-item-icon fa fa-fw fa-link"></i><br>友链</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i> </span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"><input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input"></div></div><div id="local-search-result"></div></div></div></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://www.wolfdan.cn/ARST打卡第二周-2-521/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="单林敏"><meta itemprop="description" content="搞机玩家,致敬极客"><meta itemprop="image" content="/images/avatar.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="单林敏的博客"></span><header class="post-header"><h2 class="post-title" itemprop="name headline">ARST打卡第二周(2/521)</h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-05T16:24:09+08:00">2019-05-05 </time><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于&#58;</span> <time title="更新于" itemprop="dateModified" datetime="2019-11-30T14:18:24+08:00">2019-11-30 </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/ARST/" itemprop="url" rel="index"><span itemprop="name">ARST</span> </a></span></span><span class="post-comments-count"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-comment-o"></i> </span><a href="/ARST打卡第二周-2-521/#comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/ARST打卡第二周-2-521/" itemprop="commentCount"></span> </a></span><span class="post-wordcount"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i> </span><span title="字数">5k</span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="ARST第二周-2-521"><a href="#ARST第二周-2-521" class="headerlink" title="ARST第二周(2/521)"></a>ARST第二周(2/521)</h1><h2 id="Algorithm"><a href="#Algorithm" class="headerlink" title="Algorithm:"></a>Algorithm:</h2><p><a href="https://github.com/wolfdan666/WolfEat3moreMeatEveryday/tree/master/2019.5/2019.5.2" target="_blank" rel="noopener">第二周LeetCode</a></p><h2 id="Review-为了学习英文"><a href="#Review-为了学习英文" class="headerlink" title="Review:(为了学习英文)"></a>Review:(为了学习英文)</h2><p>Consider how our digital content consumption works today. Some people consume free music and TV shows daily via pirated files, illegal streams. Some consume digital content via legal, publicly-funded radio and TV station streams. Others pay for the privilege to access highly curated and secure services like Spotify, Pandora, Netflix, Hulu, and others. AR clouds will be no different.So how will we choose? I think the answer is security and convenience.</p><p>我也认为将来全面上云之后盗版资源的安全隐患会变得极其巨大，所以必须做好安全防范，最好购买服务，但是同时也最好要照顾世界上的弱势群体</p><p>Don’t Be Evil！</p><p><a href="https://medium.com/@NextRealityNews/the-future-of-the-ar-cloud-a-thousand-walled-gardens-bloom-54426fe36b8b?KGa=true" target="_blank" rel="noopener">The Future of the AR Cloud — a Thousand Walled Gardens Bloom</a></p><h2 id="Tip-主要是为了总结和归纳你在是常工作中所遇到的知识点"><a href="#Tip-主要是为了总结和归纳你在是常工作中所遇到的知识点" class="headerlink" title="Tip:(主要是为了总结和归纳你在是常工作中所遇到的知识点)"></a>Tip:(主要是为了总结和归纳你在是常工作中所遇到的知识点)</h2><p>安装VMware15Pro，在上面安装CentOS7，并设置NAT联网(以及kexue就不说了，自行学习)<br><a href="https://blog.csdn.net/zouhuu/article/details/85794779" target="_blank" rel="noopener">安装VMware15Pro</a></p><p><a href="https://blog.csdn.net/zouhuu/article/details/86530787" target="_blank" rel="noopener">VMware15上安装CentOS7</a></p><p><a href="https://blog.csdn.net/wangmx1993328/article/details/80897533" target="_blank" rel="noopener">设置NAT联网</a></p><h2 id="Share："><a href="#Share：" class="headerlink" title="Share："></a>Share：</h2><h3 id="1-基于上下文的自适应算术编码代码实现"><a href="#1-基于上下文的自适应算术编码代码实现" class="headerlink" title="1.基于上下文的自适应算术编码代码实现"></a>1.基于上下文的自适应算术编码代码实现</h3><p>设信源可能输出的符号是a, b, c 三个字母，构成一个二阶Markov信源，且各阶条件概率如下，试编写程序可以对任意字母序列（如abbcabcb）进行基于上下文的自适应算术编码，并进行相应的译码。<br>思路:建立合适的映射表，然后对一个字符和两个字符的时候进行特殊讨论.<br></p><div class="highlight-wrap" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="CPP"><figure class="iseeu highlight /cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设信源可能输出的符号是a, b, c 三个字母，构成一个二阶Markov信源，且各阶条件概率如下，</span></span><br><span class="line"><span class="comment">// 试编写程序可以对任意字母序列（如abbcabcb）进行基于上下文的自适应算术编码，并进行相应的译码。</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">// 经过研究发现，长度变长的时候会出现不相等的情况，分析得知，是因为算法本身的概率选取的调整问题double tp = 0.01*be + 0.99*end;</span></span><br><span class="line"><span class="comment">// 选取时应该把tp调整到大区间段(个人猜测，不会证明，但可以写一个循环自动化调参训练...当在某个长度(input)上面达到某个精度的时候输出参数)</span></span><br><span class="line"><span class="comment">// input : length  先建立 length 长的全 a 序列, length重循环  最后一个从 a+0到+1到+2(最内层),每个外层一变化都要变化一次,O(3^length)指数爆炸</span></span><br><span class="line"><span class="comment">for(double i=0.01;i&lt;1.00;i+=0.01)&#123;</span></span><br><span class="line"><span class="comment">    for()// length重for3循环，后面计算  sumOf((s&lt;t)||(s&gt;t)) / 3^length  错误率...维护错误率min的i值 看i为多少的时候l错误率最低</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">发现还有是精度问题，如果p后面变得很小的时候，那判断的时候很可能去掉几位判断</span></span><br><span class="line"><span class="comment">最近这几天事情比较多，所以就不写高精度的小数计算了</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="built_in">string</span> s,ans,t;</span><br><span class="line"><span class="keyword">double</span> table[<span class="number">4</span>][<span class="number">4</span>][<span class="number">4</span>];<span class="comment">// eg: c/ab [1][2][3]   c/a [1][3][0]  a [1][0][0]</span></span><br><span class="line"><span class="keyword">int</span> sl;<span class="comment">// s 的长度</span></span><br><span class="line"><span class="keyword">int</span> l; <span class="comment">// 码符号长度</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Init</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">3</span>;i++)&#123;</span><br><span class="line">        table[i][<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span>/<span class="number">3.0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;<span class="number">4</span>;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;<span class="number">4</span>;j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(i==j) table[i][j][<span class="number">0</span>]=<span class="number">0.5</span>;</span><br><span class="line">            <span class="keyword">else</span> table[i][j][<span class="number">0</span>]=<span class="number">0.25</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 有点机械，还好sublime有多点编辑</span></span><br><span class="line">    table[<span class="number">1</span>][<span class="number">1</span>][<span class="number">1</span>]=<span class="number">3</span>/<span class="number">5.0</span>;    table[<span class="number">1</span>][<span class="number">1</span>][<span class="number">2</span>]=<span class="number">1</span>/<span class="number">5.0</span>;    table[<span class="number">1</span>][<span class="number">1</span>][<span class="number">3</span>]=<span class="number">1</span>/<span class="number">5.0</span>;</span><br><span class="line">    table[<span class="number">1</span>][<span class="number">2</span>][<span class="number">1</span>]=<span class="number">1</span>/<span class="number">4.0</span>;    table[<span class="number">1</span>][<span class="number">2</span>][<span class="number">2</span>]=<span class="number">1</span>/<span class="number">4.0</span>;    table[<span class="number">1</span>][<span class="number">2</span>][<span class="number">3</span>]=<span class="number">1</span>/<span class="number">2.0</span>;</span><br><span class="line">    table[<span class="number">1</span>][<span class="number">3</span>][<span class="number">1</span>]=<span class="number">1</span>/<span class="number">4.0</span>;    table[<span class="number">1</span>][<span class="number">3</span>][<span class="number">2</span>]=<span class="number">1</span>/<span class="number">4.0</span>;    table[<span class="number">1</span>][<span class="number">3</span>][<span class="number">3</span>]=<span class="number">1</span>/<span class="number">2.0</span>;</span><br><span class="line">    table[<span class="number">2</span>][<span class="number">1</span>][<span class="number">1</span>]=<span class="number">1</span>/<span class="number">2.0</span>;    table[<span class="number">2</span>][<span class="number">1</span>][<span class="number">2</span>]=<span class="number">1</span>/<span class="number">4.0</span>;    table[<span class="number">2</span>][<span class="number">1</span>][<span class="number">3</span>]=<span class="number">1</span>/<span class="number">4.0</span>;</span><br><span class="line">    table[<span class="number">2</span>][<span class="number">2</span>][<span class="number">1</span>]=<span class="number">1</span>/<span class="number">5.0</span>;    table[<span class="number">2</span>][<span class="number">2</span>][<span class="number">2</span>]=<span class="number">3</span>/<span class="number">5.0</span>;    table[<span class="number">2</span>][<span class="number">2</span>][<span class="number">3</span>]=<span class="number">1</span>/<span class="number">5.0</span>;</span><br><span class="line">    table[<span class="number">2</span>][<span class="number">3</span>][<span class="number">1</span>]=<span class="number">1</span>/<span class="number">4.0</span>;    table[<span class="number">2</span>][<span class="number">3</span>][<span class="number">2</span>]=<span class="number">1</span>/<span class="number">4.0</span>;    table[<span class="number">2</span>][<span class="number">3</span>][<span class="number">3</span>]=<span class="number">1</span>/<span class="number">2.0</span>;</span><br><span class="line">    table[<span class="number">3</span>][<span class="number">1</span>][<span class="number">1</span>]=<span class="number">1</span>/<span class="number">2.0</span>;    table[<span class="number">3</span>][<span class="number">1</span>][<span class="number">2</span>]=<span class="number">1</span>/<span class="number">4.0</span>;    table[<span class="number">3</span>][<span class="number">1</span>][<span class="number">3</span>]=<span class="number">1</span>/<span class="number">4.0</span>;</span><br><span class="line">    table[<span class="number">3</span>][<span class="number">2</span>][<span class="number">1</span>]=<span class="number">1</span>/<span class="number">2.0</span>;    table[<span class="number">3</span>][<span class="number">2</span>][<span class="number">2</span>]=<span class="number">1</span>/<span class="number">4.0</span>;    table[<span class="number">3</span>][<span class="number">2</span>][<span class="number">3</span>]=<span class="number">1</span>/<span class="number">4.0</span>;</span><br><span class="line">    table[<span class="number">3</span>][<span class="number">3</span>][<span class="number">1</span>]=<span class="number">1</span>/<span class="number">5.0</span>;    table[<span class="number">3</span>][<span class="number">3</span>][<span class="number">2</span>]=<span class="number">1</span>/<span class="number">5.0</span>;    table[<span class="number">3</span>][<span class="number">3</span>][<span class="number">3</span>]=<span class="number">3</span>/<span class="number">5.0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">encord</span><span class="params">()</span></span>&#123;<span class="comment">// 老师用be end 算 len (概率长度) ,我觉得用p (概率长度) 算前后更方便</span></span><br><span class="line">    <span class="comment">// 维护 p ,be , end , 之后用be ，end算出概率，p算出编码长度,之后便可以编码</span></span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"编码开始"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">int</span> n = <span class="keyword">int</span>(s.length());</span><br><span class="line">    <span class="keyword">double</span> be = <span class="number">0.0</span>,end = <span class="number">1.0</span>;</span><br><span class="line">    <span class="keyword">double</span> p = <span class="number">1.0</span>;</span><br><span class="line">    <span class="keyword">int</span> k = s[<span class="number">0</span>] - <span class="string">'a'</span> + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> kp=<span class="number">0</span>,kpp=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(i==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(k==<span class="number">1</span>)&#123;end = <span class="number">1</span>/<span class="number">3.0</span>;&#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(k==<span class="number">2</span>)&#123; be = <span class="number">1</span>/<span class="number">3.0</span>; end = <span class="number">2</span>/<span class="number">3.0</span>;&#125;</span><br><span class="line">            <span class="keyword">else</span> be = <span class="number">2</span>/<span class="number">3.0</span>;</span><br><span class="line">            p = <span class="number">1</span>/<span class="number">3.0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(i==<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="comment">// kp = s[i-1] - 'a' + 1;/// 我也是醉了，昨天状态不佳的时候写了多少bug，我以后再在状态不好时写代码我是狗</span></span><br><span class="line">            kp = k;</span><br><span class="line">            k = s[i] - <span class="string">'a'</span> + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(k==<span class="number">1</span>)&#123;</span><br><span class="line">                p *= table[kp][k][<span class="number">0</span>];</span><br><span class="line">                end = be + p;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(k==<span class="number">2</span>)&#123;</span><br><span class="line">                be += p*table[kp][k<span class="number">-1</span>][<span class="number">0</span>];</span><br><span class="line">                p *= table[kp][k][<span class="number">0</span>];</span><br><span class="line">                <span class="comment">// p *= table[kp][k][0];  // 昨天写的bug 真牛逼..</span></span><br><span class="line">                <span class="comment">// be += table[kp][k-1][0];</span></span><br><span class="line">                end = be + p;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                p *= table[kp][k][<span class="number">0</span>];</span><br><span class="line">                be = end - p;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            kpp = kp;</span><br><span class="line">            kp = k;</span><br><span class="line">            <span class="comment">// kp = s[i-1] - 'a' + 1;// 昨天的bug</span></span><br><span class="line">            <span class="comment">// kpp = s[i-2] - 'a' + 1;</span></span><br><span class="line">            k = s[i] - <span class="string">'a'</span> + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(k==<span class="number">1</span>)&#123;</span><br><span class="line">                p *= table[kpp][kp][k];</span><br><span class="line">                end = be + p;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(k==<span class="number">2</span>)&#123;</span><br><span class="line">                <span class="comment">// p *= table[kpp][kp][k];</span></span><br><span class="line">                <span class="comment">// be += table[kpp][kp][k-1];// 这里有bug</span></span><br><span class="line">                <span class="comment">// end = be + p;</span></span><br><span class="line">                be += p*table[kpp][kp][k<span class="number">-1</span>];<span class="comment">// 原来的长度*第一段</span></span><br><span class="line">                p *= table[kpp][kp][k];</span><br><span class="line">                end = be + p;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                p *= table[kpp][kp][k];</span><br><span class="line">                be = end - p;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// cout&lt;&lt;"s[i]"&lt;&lt;s[i]&lt;&lt;endl;</span></span><br><span class="line">        <span class="comment">// cout&lt;&lt;"kpp:"&lt;&lt;kpp&lt;&lt;" kp:"&lt;&lt;kp&lt;&lt;" k:"&lt;&lt;k&lt;&lt;endl;</span></span><br><span class="line">        <span class="comment">// cout&lt;&lt;"p监控:"&lt;&lt;p&lt;&lt;endl;</span></span><br><span class="line">        <span class="comment">// cout&lt;&lt;"be:  "&lt;&lt;be&lt;&lt;endl;</span></span><br><span class="line">        <span class="comment">// cout&lt;&lt;"end: "&lt;&lt;end&lt;&lt;endl;</span></span><br><span class="line">    &#125;</span><br><span class="line">    l = <span class="built_in">ceil</span>(<span class="built_in">log</span>(<span class="number">1</span>/p)/<span class="built_in">log</span>(<span class="number">2</span>));</span><br><span class="line">    <span class="comment">// cout&lt;&lt;"be:"&lt;&lt;be&lt;&lt;"end:"&lt;&lt;end&lt;&lt;endl;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// double tp = 0.5*be + 0.5*end;</span></span><br><span class="line">    <span class="keyword">double</span> tp = <span class="number">0.01</span>*be + <span class="number">0.99</span>*end;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> tp2;</span><br><span class="line">    ans.resize(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;l;i++)&#123;</span><br><span class="line">        tp *= <span class="number">2</span>;</span><br><span class="line">        tp2 = (<span class="keyword">int</span>)tp;</span><br><span class="line">        tp -= tp2;</span><br><span class="line">        ans += <span class="keyword">char</span>(tp2+<span class="string">'0'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"编码长度为: "</span>&lt;&lt;l&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"编码结果为: "</span>&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    sl = <span class="keyword">int</span>(s.length());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">decord</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"\n译码: "</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">double</span> res = <span class="number">0.0</span>;<span class="keyword">double</span> w = <span class="number">0.5</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;l;i++,w*=<span class="number">0.5</span>)&#123;</span><br><span class="line">        res += w*(ans[i]-<span class="string">'0'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"译码选取的数字为:"</span>&lt;&lt;res&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">int</span> a=<span class="number">0</span>,b=<span class="number">0</span>;     <span class="comment">// 用a,b,c来记录下一个概率分布数组</span></span><br><span class="line">    <span class="keyword">double</span> p = <span class="number">1</span>;  <span class="comment">//还是需要记录一个p(概率长度),因为这里的table是通用映射表，需要加约束</span></span><br><span class="line">    t.resize(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">double</span> be = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;sl;i++)&#123;</span><br><span class="line">        <span class="comment">// 2019年4月27日20:52:03 发现还是不能仅跟长度对比啊，没有be，end不行</span></span><br><span class="line">        <span class="keyword">if</span>(i==<span class="number">0</span>)&#123;<span class="comment">// 记住左闭右开</span></span><br><span class="line">            <span class="keyword">if</span>(res&lt;<span class="number">1</span>/<span class="number">3.0</span>)&#123;t+=<span class="string">'a'</span>;a = <span class="number">1</span>;be = <span class="number">0.0</span>;&#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(res&lt;<span class="number">2</span>/<span class="number">3.0</span>)&#123;t+=<span class="string">'b'</span>; a = <span class="number">2</span>; be = <span class="number">1</span>/<span class="number">3.0</span>;&#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;t+=<span class="string">'c'</span>;a = <span class="number">3</span>; be = <span class="number">2</span>/<span class="number">3.0</span>;&#125;</span><br><span class="line">            p = <span class="number">1</span>/<span class="number">3.0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(i==<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(res &lt; be + p*table[a][<span class="number">1</span>][<span class="number">0</span>])&#123;<span class="comment">//be 不变</span></span><br><span class="line">                t += <span class="string">'a'</span>; b = <span class="number">1</span>;</span><br><span class="line">                p *= table[a][<span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(res &lt; be + p*(table[a][<span class="number">2</span>][<span class="number">0</span>]+table[a][<span class="number">1</span>][<span class="number">0</span>]))&#123;</span><br><span class="line">                t += <span class="string">'b'</span>; b = <span class="number">2</span>;</span><br><span class="line">                be += p*(table[a][<span class="number">1</span>][<span class="number">0</span>]);</span><br><span class="line">                <span class="comment">// be += p*table[a][2][0]; // 2019年4月27日21:49:18今天的bug也很抠脚</span></span><br><span class="line">                p *= table[a][<span class="number">2</span>][<span class="number">0</span>];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                t += <span class="string">'c'</span>; b = <span class="number">3</span>;</span><br><span class="line">                be += p*(table[a][<span class="number">1</span>][<span class="number">0</span>]+table[a][<span class="number">2</span>][<span class="number">0</span>]);</span><br><span class="line">                p *= table[a][<span class="number">3</span>][<span class="number">0</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;<span class="comment">// eg: c/ab [1][2][3]   c/a [1][3][0]  a [1][0][0]自己开始的假设碰巧有一致性，下次还是要打草稿</span></span><br><span class="line">            <span class="comment">// 要先p*=table[a][b][1]再更新a,b</span></span><br><span class="line">            <span class="keyword">if</span>(res &lt; be + p*table[a][b][<span class="number">1</span>])&#123;</span><br><span class="line">                t += <span class="string">'a'</span>;</span><br><span class="line">                p*=table[a][b][<span class="number">1</span>];<span class="comment">// 更新a,b的值</span></span><br><span class="line">                a = b; b = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(res &lt; be + p*(table[a][b][<span class="number">2</span>]+table[a][b][<span class="number">1</span>]))&#123;</span><br><span class="line">                t += <span class="string">'b'</span>;</span><br><span class="line">                be += p*table[a][b][<span class="number">1</span>];</span><br><span class="line">                p*=table[a][b][<span class="number">2</span>];</span><br><span class="line">                a = b; b = <span class="number">2</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                t += <span class="string">'c'</span>;</span><br><span class="line">                be += p*(table[a][b][<span class="number">2</span>]+table[a][b][<span class="number">1</span>]);</span><br><span class="line">                p*=table[a][b][<span class="number">3</span>];</span><br><span class="line">                a = b; b = <span class="number">3</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"译码结果为:"</span>&lt;&lt;t&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> <span class="keyword">const</span> *argv[])</span></span>&#123;</span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    Init();</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"请输入需要编码的字符序列(编码符号为a,b,c):"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="comment">// cout&lt;&lt;table[1][1][1]&lt;&lt;endl;</span></span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;s&amp;&amp;s[<span class="number">0</span>]!=<span class="string">'#'</span>)&#123;</span><br><span class="line">        encord();</span><br><span class="line">        decord();</span><br><span class="line">        <span class="built_in">string</span> tstr;</span><br><span class="line">        tstr += ((s&lt;t)||(s&gt;t)) == <span class="number">0</span> ? <span class="string">"恭喜你,译码和源码完全一样哦"</span>:<span class="string">"Sorry,可能长度超出了默认精度范围了哦,有空试试高精度吧"</span>;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;tstr&lt;&lt;<span class="string">"  此时源码长度为: "</span>&lt;&lt;sl&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="string">"\n是否验证下一个字符序列,是则输入,否则输入#:"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p></p><h3 id="2-完全统计模型的算术编码代码实现"><a href="#2-完全统计模型的算术编码代码实现" class="headerlink" title="2.完全统计模型的算术编码代码实现"></a>2.完全统计模型的算术编码代码实现</h3><p>设信源可能输出的符号是26个字母，且每个字母出现的概率未知，试编写程序可以对任意字母序列（如presentation）进行完全统计模型的算术编码，并与香农编码进行码长比较（比值）。<br>思路:对输入的整个串做分析，然后生成特定串的概率映射表，从而可以开始用最基础的Algorithm Code做题了.</p><div class="highlight-wrap" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="CPP"><figure class="iseeu highlight /cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">设信源可能输出的符号是26个字母，且每个字母出现的概率未知，试编写程序可以对任意字母序列</span></span><br><span class="line"><span class="comment">（如presentation）进行完全统计模型的算术编码，并与香农编码进行码长比较（比值）。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">2019年4月28日19:44:50 总算找完了bug，发现真的有精度问题，如果p后面变得很小的时候，那判断的时候很可能去掉几位判断</span></span><br><span class="line"><span class="comment">最近这几天事情比较多，所以就不写高精度的小数计算了</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> x first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> y second</span></span><br><span class="line"><span class="built_in">string</span> s, ans, t;</span><br><span class="line"><span class="keyword">int</span> num[<span class="number">26</span>];</span><br><span class="line"><span class="keyword">int</span> Myhash[<span class="number">26</span>];</span><br><span class="line"><span class="keyword">char</span> Myhash2[<span class="number">26</span>];</span><br><span class="line"><span class="keyword">int</span> XNlen;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">double</span>, pair&lt;<span class="keyword">double</span>, <span class="keyword">double</span>&gt;&gt; Node;</span><br><span class="line"><span class="built_in">vector</span>&lt;Node&gt; p;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> <span class="keyword">const</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"请输入需要编码的字符序列(编码符号为小写哦):"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">cin</span> &gt;&gt; s&amp;&amp;s[<span class="number">0</span>]!=<span class="string">'#'</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        XNlen = <span class="number">0</span>;</span><br><span class="line">        p.clear();</span><br><span class="line">        <span class="built_in">memset</span>(num, <span class="number">0</span>, <span class="keyword">sizeof</span>(num));</span><br><span class="line">        <span class="built_in">memset</span>(Myhash, <span class="number">0</span>, <span class="keyword">sizeof</span>(Myhash));</span><br><span class="line">        <span class="built_in">memset</span>(Myhash2, <span class="number">0</span>, <span class="keyword">sizeof</span>(Myhash2));</span><br><span class="line">        <span class="keyword">int</span> n = (<span class="keyword">int</span>)s.length();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            num[s[i] - <span class="string">'a'</span>]++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Init</span></span><br><span class="line">        <span class="comment">// 先建立通用的概率，然后再进行讨论</span></span><br><span class="line">        <span class="comment">// pair&lt;possibility,&lt;be,end&gt;&gt; + hash[char] = order</span></span><br><span class="line">        <span class="keyword">double</span> be = <span class="number">0</span>, end = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">double</span> temd;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">26</span>; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (num[i])</span><br><span class="line">            &#123; <span class="comment">// 不为0说明有值的</span></span><br><span class="line">                be = end;</span><br><span class="line">                temd = (<span class="keyword">double</span>)num[i] / n;</span><br><span class="line">                end = be + temd;</span><br><span class="line">                XNlen += <span class="built_in">ceil</span>(<span class="built_in">log</span>(<span class="number">1</span> / temd) / <span class="built_in">log</span>(<span class="number">2</span>)) * num[i];</span><br><span class="line">                p.pb(&#123;temd, &#123;be, end&#125;&#125;);</span><br><span class="line">                Myhash[i] = k;</span><br><span class="line">                Myhash2[k] = <span class="string">'a'</span> + i;</span><br><span class="line">                <span class="comment">//在vscode debug结果令人震惊的时候还是得手动</span></span><br><span class="line">                <span class="comment">// cout&lt;&lt;"be: "&lt;&lt;be&lt;&lt;" end: "&lt;&lt;end&lt;&lt;endl;</span></span><br><span class="line">                k++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// p的构建好像出了问题，2019年4月28日12:34:18 来测试一下  最后发现没有出错...</span></span><br><span class="line">        <span class="comment">// for (int i = 0; i &lt; (int)p.size();i++)&#123;</span></span><br><span class="line">        <span class="comment">//     cout &lt;&lt; "p[i].x:" &lt;&lt; p[i].x &lt;&lt; " p[i].y.x:" &lt;&lt; p[i].y.x &lt;&lt; " p[i].y.y:" &lt;&lt; p[i].y.y &lt;&lt; endl;</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// encode</span></span><br><span class="line">        <span class="keyword">double</span> pos = <span class="number">1</span>;</span><br><span class="line">        be = <span class="number">0</span>, end = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)&#123;</span><br><span class="line">            <span class="keyword">int</span> tem = Myhash[s[i] - <span class="string">'a'</span>];</span><br><span class="line">            be += pos * p[tem].y.x;</span><br><span class="line">            <span class="comment">// end += pos * p[tem].y.y;  昨天的bug   今天又错了，就是不能这样操作因为可能第一次就有end = 1，可以不维护end,可以的</span></span><br><span class="line">            pos *= p[tem].x;</span><br><span class="line">            <span class="comment">// cout &lt;&lt; "tem:" &lt;&lt; tem &lt;&lt; " p[tem].y.x" &lt;&lt; p[tem].y.x &lt;&lt; " p[tem].y.y:" &lt;&lt;p[tem].y.y &lt;&lt; endl;</span></span><br><span class="line">            <span class="comment">// cout &lt;&lt; "be:" &lt;&lt; be &lt;&lt; " end:" &lt;&lt; end &lt;&lt; endl;</span></span><br><span class="line">            <span class="comment">// cout &lt;&lt; "pos监控: " &lt;&lt; pos &lt;&lt; endl;</span></span><br><span class="line">        &#125;</span><br><span class="line">        end = be + pos;</span><br><span class="line">        <span class="comment">// cout &lt;&lt; "be:" &lt;&lt; be &lt;&lt; " end:" &lt;&lt; end &lt;&lt; endl;</span></span><br><span class="line">        <span class="comment">// cout &lt;&lt; "pos监控: " &lt;&lt; pos &lt;&lt; endl;</span></span><br><span class="line">        <span class="keyword">int</span> l = <span class="built_in">ceil</span>(<span class="built_in">log</span>(<span class="number">1</span> / pos) / <span class="built_in">log</span>(<span class="number">2</span>));</span><br><span class="line">        <span class="keyword">double</span> tp = <span class="number">0.01</span> * be + <span class="number">0.99</span> * end;</span><br><span class="line">        <span class="keyword">int</span> tp2;</span><br><span class="line">        ans.resize(<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; l; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            tp *= <span class="number">2</span>;</span><br><span class="line">            tp2 = (<span class="keyword">int</span>)tp;</span><br><span class="line">            tp -= tp2;</span><br><span class="line">            ans += <span class="keyword">char</span>(tp2 + <span class="string">'0'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"编码长度为: "</span> &lt;&lt; l &lt;&lt; <span class="string">" 香农编码长度为:"</span> &lt;&lt; XNlen &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">if</span> (l &lt; XNlen)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"WOW,Algorithm Code 果然名不虚传！"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"编码结果为: "</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">int</span> sl = <span class="keyword">int</span>(s.length());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 译码</span></span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"\n译码: "</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">double</span> res = <span class="number">0.0</span>;</span><br><span class="line">        <span class="keyword">double</span> w = <span class="number">0.5</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; l; i++, w *= <span class="number">0.5</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            res += w * (ans[i] - <span class="string">'0'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"译码选取的数字为:"</span> &lt;&lt; res &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        pos = <span class="number">1</span>;</span><br><span class="line">        t.resize(<span class="number">0</span>);</span><br><span class="line">        be = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; sl; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; k; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">// cout &lt;&lt; "p[j].y.x:" &lt;&lt; pos*p[j].y.x &lt;&lt; "p[j].y.y" &lt;&lt; pos*p[j].y.y &lt;&lt; endl;</span></span><br><span class="line">                <span class="comment">// if (res &gt;= pos * p[j].y.x &amp;&amp; res &lt; pos * p[j].y.y)  // mdzz,这个p值会越来越小，所以根本不能用 这样的比较，必须还是要和be和end比较    1. 没有借鉴昨天的后果  2. 没有思考清楚参考系的结果</span></span><br><span class="line">                <span class="keyword">if</span> (res &gt;= be + pos * p[j].y.x &amp;&amp; res &lt; be + pos * p[j].y.y)</span><br><span class="line">                &#123;</span><br><span class="line">                    t += Myhash2[j]; <span class="comment">// 这里应该是j对应的反hash</span></span><br><span class="line">                    be += pos * p[j].y.x;</span><br><span class="line">                    pos *= p[j].x;</span><br><span class="line">                    <span class="keyword">break</span>;<span class="comment">// 不跳出可能再二次迭代出错</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"译码结果为: \n"</span> &lt;&lt; t &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="built_in">string</span> tstr;</span><br><span class="line">        tstr += ((s&lt;t)||(s&gt;t)) == <span class="number">0</span> ? <span class="string">"恭喜你,译码和源码完全一样哦"</span>:<span class="string">"Sorry,可能长度超出了默认精度范围了哦,有空试试高精度吧"</span>;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;tstr&lt;&lt;<span class="string">"  此时源码长度为: "</span>&lt;&lt;sl&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="string">"\n是否验证下一个字符序列,是则输入,否则输入#:"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h3 id="3-完全统计模型的算术编码代码实现—无限长不报错版"><a href="#3-完全统计模型的算术编码代码实现—无限长不报错版" class="headerlink" title="3.完全统计模型的算术编码代码实现—无限长不报错版"></a>3.完全统计模型的算术编码代码实现—无限长不报错版</h3><p>思路：<strong>上面的代码在长度达到20多位的时候就可能会报错了，所以也就是说在10位以内绝对不会报错，所以我们可以把源码分成8个一串的批次处理，这样就可以使的整个过程完成没有错误了</strong></p><ul><li>这种方法只要不溢出string的内存,理论上来说是可以实现无限长编码的</li><li>网上查了一下，发现string最大4G</li><li>4GB是单个程序内存寻址的极限，因此也是CString的极限。</li><li>绝对够你用了(所以一个2K电影的话就分两个string吧,23333)</li><li>1.自己昨天没有分成函数模块写，导致了自己改代码改的有点难受，于是花了2个小时改代码(然后还是没有改成函数版，因为这几天太忙了，所以就不改了，读者见谅)(小编不会说自己因为写这个分享错过了晚饭时间，所以不想改成模块化了可能主要是想早点分享给你们(lan~bu yao jiao bian~))</li><li>2.对于tp的取值思考::::取[ ]最终区段的左边会因为迭代操作而一直左偏，所以精度不行，所以选最右边的样子exp积累:<ul><li>1、 以后一定要函数化模块</li><li>2、 昨天想到的只是精度问题，只是想着暴力处理扩大精度，却没有思考的扩大精度的本质其实就是分块操作</li><li>(所以分布式+集群真是大道至简，积累成就无限的可能)</li></ul></li></ul><div class="highlight-wrap" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="CPP"><figure class="iseeu highlight /cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> x first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> y second</span></span><br><span class="line"><span class="built_in">string</span> source, ans, t;</span><br><span class="line"><span class="keyword">int</span> num[<span class="number">26</span>];</span><br><span class="line"><span class="keyword">int</span> Myhash[<span class="number">26</span>];</span><br><span class="line"><span class="keyword">char</span> Myhash2[<span class="number">26</span>];</span><br><span class="line"><span class="keyword">int</span> XNlen;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">double</span>, pair&lt;<span class="keyword">double</span>, <span class="keyword">double</span>&gt;&gt; Node;</span><br><span class="line"><span class="built_in">vector</span>&lt;Node&gt; p;</span><br><span class="line"><span class="keyword">int</span> l;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> len = <span class="keyword">int</span>(source.length());</span><br><span class="line">    <span class="keyword">int</span> last = <span class="number">0</span>,binlast=<span class="number">0</span>;<span class="comment">// 一开始没有想到binlast!</span></span><br><span class="line">    <span class="keyword">while</span>(len)&#123;</span><br><span class="line">        <span class="keyword">int</span> slen = len &gt;= <span class="number">8</span>? <span class="number">8</span> : len;</span><br><span class="line">        <span class="built_in">string</span> s = source.substr(last,slen);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// last += slen;</span></span><br><span class="line">        <span class="comment">// len -= slen;   // 这两个要在最最最后才搞，否则出错</span></span><br><span class="line">        <span class="comment">// string s = source.substr(last,slen);// mdzz 写在这</span></span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="string">"s:"</span>&lt;&lt;s&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        p.clear();</span><br><span class="line">        <span class="built_in">memset</span>(num, <span class="number">0</span>, <span class="keyword">sizeof</span>(num));</span><br><span class="line">        <span class="built_in">memset</span>(Myhash, <span class="number">0</span>, <span class="keyword">sizeof</span>(Myhash));</span><br><span class="line">        <span class="built_in">memset</span>(Myhash2, <span class="number">0</span>, <span class="keyword">sizeof</span>(Myhash2));</span><br><span class="line">        <span class="keyword">int</span> n = (<span class="keyword">int</span>)s.length();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            num[s[i] - <span class="string">'a'</span>]++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Init</span></span><br><span class="line">        <span class="comment">// 先建立通用的概率，然后再进行讨论</span></span><br><span class="line">        <span class="comment">// pair&lt;possibility,&lt;be,end&gt;&gt; + hash[char] = order</span></span><br><span class="line">        <span class="keyword">double</span> be = <span class="number">0</span>, end = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">double</span> temd;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">26</span>; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (num[i])</span><br><span class="line">            &#123; <span class="comment">// 不为0说明有值的</span></span><br><span class="line">                be = end;</span><br><span class="line">                temd = (<span class="keyword">double</span>)num[i] / n;</span><br><span class="line">                end = be + temd;</span><br><span class="line">                XNlen += <span class="built_in">ceil</span>(<span class="built_in">log</span>(<span class="number">1</span> / temd) / <span class="built_in">log</span>(<span class="number">2</span>)) * num[i];</span><br><span class="line">                p.pb(&#123;temd, &#123;be, end&#125;&#125;);</span><br><span class="line">                Myhash[i] = k;</span><br><span class="line">                Myhash2[k] = <span class="string">'a'</span> + i;</span><br><span class="line">                k++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// p的构建好像出了问题，2019年4月28日12:34:18 来测试一下  最后发现没有出错...</span></span><br><span class="line">        <span class="comment">// for (int i = 0; i &lt; (int)p.size();i++)&#123;</span></span><br><span class="line">        <span class="comment">//     cout &lt;&lt; "p[i].x:" &lt;&lt; p[i].x &lt;&lt; " p[i].y.x:" &lt;&lt; p[i].y.x &lt;&lt; " p[i].y.y:" &lt;&lt; p[i].y.y &lt;&lt; endl;</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// encode</span></span><br><span class="line">        <span class="keyword">double</span> pos = <span class="number">1</span>;</span><br><span class="line">        be = <span class="number">0</span>, end = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)&#123;</span><br><span class="line">            <span class="keyword">int</span> tem = Myhash[s[i] - <span class="string">'a'</span>];</span><br><span class="line">            be += pos * p[tem].y.x;</span><br><span class="line">            <span class="comment">// end += pos * p[tem].y.y;  昨天的bug   今天又错了，就是不能这样操作因为可能第一次就有end = 1，可以不维护end,可以的</span></span><br><span class="line">            pos *= p[tem].x;</span><br><span class="line">            <span class="comment">// cout &lt;&lt; "tem:" &lt;&lt; tem &lt;&lt; " p[tem].y.x" &lt;&lt; p[tem].y.x &lt;&lt; " p[tem].y.y:" &lt;&lt;p[tem].y.y &lt;&lt; endl;</span></span><br><span class="line">            <span class="comment">// cout &lt;&lt; "be:" &lt;&lt; be &lt;&lt; " end:" &lt;&lt; end &lt;&lt; endl;</span></span><br><span class="line">            <span class="comment">// cout &lt;&lt; "pos监控: " &lt;&lt; pos &lt;&lt; endl;</span></span><br><span class="line">        &#125;</span><br><span class="line">        end = be + pos;</span><br><span class="line">        <span class="comment">// cout &lt;&lt; "be:" &lt;&lt; be &lt;&lt; " end:" &lt;&lt; end &lt;&lt; endl;</span></span><br><span class="line">        <span class="comment">// cout &lt;&lt; "pos监控: " &lt;&lt; pos &lt;&lt; endl;</span></span><br><span class="line">        l = <span class="built_in">ceil</span>(<span class="built_in">log</span>(<span class="number">1</span> / pos) / <span class="built_in">log</span>(<span class="number">2</span>));</span><br><span class="line">        <span class="keyword">double</span> tp = <span class="number">0.01</span> * be + <span class="number">0.99</span> * end;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> tp2;</span><br><span class="line">        <span class="comment">// ans.resize(0);</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; l; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            tp *= <span class="number">2</span>;</span><br><span class="line">            tp2 = (<span class="keyword">int</span>)tp;</span><br><span class="line">            tp -= tp2;</span><br><span class="line">            ans += <span class="keyword">char</span>(tp2 + <span class="string">'0'</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"编码结果为: "</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">int</span> sl = <span class="keyword">int</span>(s.length());</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="string">"当前串长:"</span>&lt;&lt;sl&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 译码</span></span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"\n译码: "</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">double</span> res = <span class="number">0.0</span>;</span><br><span class="line">        <span class="keyword">double</span> w = <span class="number">0.5</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = binlast; i &lt; binlast+ l ; i++, w *= <span class="number">0.5</span>) <span class="comment">// 要用0 1 码长搞出来</span></span><br><span class="line">        &#123;</span><br><span class="line">            res += w * (ans[i] - <span class="string">'0'</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"译码选取的数字为:"</span> &lt;&lt; res &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        pos = <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// t.resize(0);</span></span><br><span class="line">        be = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; sl; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; k; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">// cout &lt;&lt; "p[j].y.x:" &lt;&lt; pos*p[j].y.x &lt;&lt; "p[j].y.y" &lt;&lt; pos*p[j].y.y &lt;&lt; endl;</span></span><br><span class="line">                <span class="comment">// if (res &gt;= pos * p[j].y.x &amp;&amp; res &lt; pos * p[j].y.y)  // mdzz,这个p值会越来越小，所以根本不能用 这样的比较，必须还是要和be和end比较    1. 没有借鉴昨天的后果  2. 没有思考清楚参考系的结果</span></span><br><span class="line">                <span class="keyword">if</span> (res &gt;= be + pos * p[j].y.x &amp;&amp; res &lt; be + pos * p[j].y.y)</span><br><span class="line">                &#123;</span><br><span class="line">                    t += Myhash2[j]; <span class="comment">// 这里应该是j对应的反hash</span></span><br><span class="line">                    be += pos * p[j].y.x;</span><br><span class="line">                    pos *= p[j].x;</span><br><span class="line">                    <span class="keyword">break</span>;<span class="comment">// 不跳出可能再二次迭代出错</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="string">"中间源码为："</span>&lt;&lt;s&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="string">"中间译码为："</span>&lt;&lt;t.substr(last,slen)&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">        last += slen;</span><br><span class="line">        len -= slen;</span><br><span class="line">        binlast += l;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> <span class="keyword">const</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"请输入需要编码的字符序列(编码符号为小写哦):"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;source&amp;&amp;source[<span class="number">0</span>]!=<span class="string">'#'</span>) &#123;</span><br><span class="line">        XNlen = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        t.resize(<span class="number">0</span>);</span><br><span class="line">        ans.resize(<span class="number">0</span>);</span><br><span class="line">        solve();</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="string">"编码为："</span>&lt;&lt;ans&lt;&lt;<span class="string">"\n编码长度是："</span>&lt;&lt;ans.length()&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="string">"译码为:"</span>&lt;&lt;t&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">        <span class="comment">// 与香农比较</span></span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"编码长度为: "</span> &lt;&lt; l &lt;&lt; <span class="string">" 香农编码长度为:"</span> &lt;&lt; XNlen &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">if</span> (l &lt; XNlen)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"WOW,Algorithm Code 果然名不虚传！"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">string</span> tstr;</span><br><span class="line">        tstr += ((source&lt;t)||(source&gt;t)) == <span class="number">0</span> ? <span class="string">"恭喜你,译码和源码完全一样哦"</span>:<span class="string">"Sorry,可能长度超出了默认精度范围了哦,有空试试高精度吧"</span>;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;tstr&lt;&lt;<span class="string">"  此时源码长度为: "</span>&lt;&lt;<span class="keyword">int</span>(source.length())&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="string">"\n是否验证下一个字符序列,是则输入,否则输入#:"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h1 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h1><p>2019年10月11日19:42:24 更新了文章,发现主分类不用写updated时间也会由插件记录更新时间,但是我不知道记录在哪了,所以写一下比较好</p></div><div class="popular-posts-header"><i class="fa fa-graduation-cap"></i> 相关文章</div><details><summary>点击查看</summary><ul class="popular-posts"><li class="popular-posts-item"><div class="popular-posts-title"><a href="\ARST打卡第11周-11-521\" rel="bookmark">ARST打卡第11周-11-521</a></div></li><li class="popular-posts-item"><div class="popular-posts-title"><a href="\ARST打卡第14周-14-521\" rel="bookmark">ARST打卡第14周-14-521</a></div></li><li class="popular-posts-item"><div class="popular-posts-title"><a href="\ARST打卡第12周-12-521\" rel="bookmark">ARST打卡第12周-12-521</a></div></li><li class="popular-posts-item"><div class="popular-posts-title"><a href="\ARST打卡第13周-13-521\" rel="bookmark">ARST打卡第13周-13-521</a></div></li><li class="popular-posts-item"><div class="popular-posts-title"><a href="\ARST打卡第15周-15-521\" rel="bookmark">ARST打卡第15周[15/521]</a></div></li><li class="popular-posts-item"><div class="popular-posts-title"><a href="\ARST打卡第16周-16-521\" rel="bookmark">ARST打卡第16周[16/521]</a></div></li><li class="popular-posts-item"><div class="popular-posts-title"><a href="\ARST打卡第20周-20-521\" rel="bookmark">ARST打卡第20周[20/521]</a></div></li><li class="popular-posts-item"><div class="popular-posts-title"><a href="\ARST打卡第17周-17-521\" rel="bookmark">ARST打卡第17周[17/521]</a></div></li><li class="popular-posts-item"><div class="popular-posts-title"><a href="\ARST打卡第18周-18-521\" rel="bookmark">ARST打卡第18周[18/521]</a></div></li><li class="popular-posts-item"><div class="popular-posts-title"><a href="\ARST打卡第19周-19-521\" rel="bookmark">ARST打卡第19周[19/521]</a></div></li></ul></details><div><div class="my_post_copyright"><script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script><script src="https://cdn.bootcss.com/jquery/2.0.0/jquery.min.js"></script><script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script><p><span>本文标题:</span><a href="/ARST打卡第二周-2-521/">ARST打卡第二周(2/521)</a></p><p><span>文章作者:</span><a href="/" title="访问 单林敏 的个人博客">单林敏</a></p><p><span>发布时间:</span>2019年05月05日 - 16:24:09</p><p><span>最后更新:</span>2019年11月30日 - 14:18:24</p><p><span>原始链接:</span><a href="/ARST打卡第二周-2-521/" title="ARST打卡第二周(2/521)">https://www.wolfdan.cn/ARST打卡第二周-2-521/</a> <span class="copy-path" title="点击复制文章链接"><i class="fa fa-clipboard" data-clipboard-text="https://www.wolfdan.cn/ARST打卡第二周-2-521/" aria-label="复制成功！"></i></span></p><p><span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">署名-非商业性使用-禁止演绎 4.0 国际</a> 转载请保留原文链接及作者。</p></div><script>var clipboard=new Clipboard(".fa-clipboard");$(".fa-clipboard").click(function(){clipboard.on("success",function(){swal({title:"",text:"复制成功",icon:"success",showConfirmButton:!0})})})</script></div><div><div><div class="read-over">-------------------本文结束 <i class="fa fa-paw"></i> 感谢您的阅读-------------------</div></div></div><div><div class="share_reward"><div>坚持原创技术分享，感谢您的支持和鼓励！</div><button id="rewardButton" disable="enable" onclick='var e=document.getElementById("QR");"none"===e.style.display?e.style.display="block":e.style.display="none"'><span>打赏</span></button><div id="QR" style="display:none"><div id="wechat" style="display:inline-block"><img id="wechat_qr" src="/images/wechatpay.jpg" alt="单林敏 微信支付"><p>微信支付</p></div><div id="alipay" style="display:inline-block"><img id="alipay_qr" src="/images/alipay.jpg" alt="单林敏 支付宝"><p>支付宝</p></div></div></div></div><footer class="post-footer"><div class="post-tags"><a href="/tags/ARST/" rel="tag"><i class="fa fa-tag"></i> ARST</a></div><div class="post-widgets"><div class="wp_rating"><div style="color:rgba(0,0,0,.75);font-size:13px;letter-spacing:4px;margin-bottom:5px">(&gt;看完记得五星好评哦亲&lt;)</div><div id="wpac-rating"></div></div></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/儒家修身之道-2019春期中考试答案/" rel="next" title="儒家修身之道 - 2019春期中考试答案"><i class="fa fa-chevron-left"></i> 儒家修身之道 - 2019春期中考试答案</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/ARST打卡第三周-3-521/" rel="prev" title="ARST打卡第三周(3/521)">ARST打卡第三周(3/521) <i class="fa fa-chevron-right"></i></a></div></div></footer></div></article><div class="post-spread"><div data-weibo-title="分享到微博" data-qq-title="分享到QQ" data-douban-title="分享到豆瓣" class="social-share" data-disabled="qzone,google+,linkedin" data-description="Share.js - 一键分享到微博，QQ空间，腾讯微博，人人，豆瓣...">分享到：</div></div></div></div><div class="comments" id="comments"></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div id="sidebar-dimmer"></div><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">文章目录</li><li class="sidebar-nav-overview" data-target="site-overview-wrap">站点概览</li></ul><section class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><a href="/"><img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="单林敏"></a><p class="site-author-name" itemprop="name">单林敏</p><p class="site-description motion-element" itemprop="description">搞机玩家,致敬极客</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">120</span> <span class="site-state-item-name">文章</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/index.html"><span class="site-state-item-count">29</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/index.html"><span class="site-state-item-count">86</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS </a><a title="收藏到书签，偶尔High一下^_^" rel="alternate" class="mw-harlem_shake_slow wobble shake" href="javascript:void(0)" onclick="(    
        /* 2019年10月03日15:11:42 头铁的我手动调了会格式,后面才想到可以用json文件转一下  
        发现转了之后也惨不忍睹,,所以不改了...  * Copyright (C) 2015 Rocko (rocko.xyz) <rocko.zxp@gmail.com>     *     * Licensed under the Apache License, Version 2.0 (the 'License');     * you may not use this file except in compliance with the License.     * You may obtain a copy of the License at     *     *      http://www.apache.org/licenses/LICENSE-2.0     *     * Unless required by applicable law or agreed to in writing, software     * distributed under the License is distributed on an 'AS IS' BASIS,     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.     * See the License for the specific language governing permissions and     * limitations under the License.     */    
function go() {
                function c() {
                                var e = document.createElement('link');
                                e.setAttribute('type', 'text/css');
                                e.setAttribute('rel', 'stylesheet');
                                e.setAttribute('href', f);
                                e.setAttribute('class', l);
                                document.body.appendChild(e)    
                                }    
                 function h() {        var e = document.getElementsByClassName(l);        for (var t = 0; t < e.length; t++) {            document.body.removeChild(e[t])        }    }     function p() {        var e = document.createElement('div');        e.setAttribute('class', a);        document.body.appendChild(e);        setTimeout(function() {            document.body.removeChild(e)        }, 100)    }     function d(e) {        return {            height : e.offsetHeight,            width : e.offsetWidth        }    }     function v(i) {        var s = d(i);        return s.height > e &amp;&amp; s.height < n &amp;&amp; s.width > t &amp;&amp; s.width < r    }     function m(e) {        var t = e;        var n = 0;        while (!!t) {            n += t.offsetTop;            t = t.offsetParent        }        return n    }     function g() {        var e = document.documentElement;        if (!!window.innerWidth) {            return window.innerHeight        } else if (e &amp;&amp; !isNaN(e.clientHeight)) {            return e.clientHeight        }        return 0    }     function y() {        if (window.pageYOffset) {            return window.pageYOffset        }        return Math.max(document.documentElement.scrollTop, document.body.scrollTop)    }     function E(e) {        var t = m(e);        return t >= w &amp;&amp; t <= b + w    }     var songs = [                'http://s3.amazonaws.com/moovweb-marketing/playground/harlem-shake.mp3', 'http://www.ytmp3.cn/down/57563.mp3'  ];    function S() {        var e = document.getElementById('audio_element_id');        if(e != null){            var index = parseInt(e.getAttribute('curSongIndex'));            if(index > songs.length - 2) {                index = 0;            } else {                index++;            }            e.setAttribute('curSongIndex', index);            N();        }        e.src = i;        e.play()    }     function x(e) {        e.className += ' ' + s + ' ' + o    }     function T(e) {        e.className += ' ' + s + ' ' + u[Math.floor(Math.random() * u.length)]    }     function N() {        var e = document.getElementsByClassName(s);        var t = new RegExp('\\b' + s + '\\b');        for (var n = 0; n < e.length; ) {            e[n].className = e[n].className.replace(t, '')        }    }    function initAudioEle() {        var e = document.getElementById('audio_element_id');        if(e === null){            e = document.createElement('audio');            e.setAttribute('class', l);            e.setAttribute('curSongIndex', 0);            e.id = 'audio_element_id';            e.loop = false;            e.bgcolor = 0;            e.addEventListener('canplay', function() {            setTimeout(function() {                x(k)            }, 500);            setTimeout(function() {                N();                p();                for (var e = 0; e < O.length; e++) {                    T(O[e])                }            }, 15500)        }, true);        e.addEventListener('ended', function() {            N();            h();            go();        }, true);        e.innerHTML = ' <p>If you are reading this, it is because your browser does not support the audio element. We recommend that you get a new browser.</p> <p>';        document.body.appendChild(e);        }    }        initAudioEle();    var e = 30;    var t = 30;    var n = 350;    var r = 350;    var curSongIndex = parseInt(document.getElementById('audio_element_id').getAttribute('curSongIndex'));    var i = songs[curSongIndex];        var s = 'mw-harlem_shake_me';    var o = 'im_first';    var u = ['im_drunk', 'im_baked', 'im_trippin', 'im_blown'];    var a = 'mw-strobe_light';    var f = 'https://rocko.xyz/css/harlem-shake-style.css';        var l = 'mw_added_css';    var b = g();    var w = y();    var C = document.getElementsByTagName('*');    var k = null;    for (var L = 0; L < C.length; L++) {        var A = C[L];        if (v(A)) {            if (E(A)) {                k = A;                break            }        }    }    if (A === null) {        console.warn('Could not find a node of the right size. Please try a different page.');        return    }    c();    S();    var O = [];    for (var L = 0; L < C.length; L++) {        var A = C[L];        if (v(A)) {            O.push(A)        }    }    })()"><i class="fa fa-music"></i> High~</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a rel="external nofollow" href="https://github.com/wolfdan666" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i>GitHub</a> </span><span class="links-of-author-item"><a rel="external nofollow" href="mailto:wolfdan666666@gmail.com" target="_blank" title="GMail"><i class="fa fa-fw fa-envelope"></i>GMail</a> </span><span class="links-of-author-item"><a rel="external nofollow" href="http://www.zhihu.com/people/xiao-lang-26-79" target="_blank" title="知乎"><i class="fa fa-fw fa-free-code-camp"></i>知乎</a> </span><span class="links-of-author-item"><a rel="external nofollow" href="https://www.jianshu.com/u/53acec957bf9" target="_blank" title="简书"><i class="fa fa-fw fa-book"></i>简书</a> </span><span class="links-of-author-item"><a rel="external nofollow" href="https://me.csdn.net/neve_give_up_dan" target="_blank" title="CSDN"><i class="fa fa-fw fa-rotate-right"></i>CSDN</a> </span><span class="links-of-author-item"><a rel="external nofollow" href="https://www.wolfdan.cn/%E4%B8%8B%E9%9B%AA%E4%BA%86/" target="_blank" title="雪花飞舞"><i class="fa fa-fw fa-image"></i>雪花飞舞</a></span></div><div class="links-of-blogroll motion-element links-of-blogroll-block"><div class="links-of-blogroll-title"><i class="fa fa-history fa-" aria-hidden="true"></i> 近期文章</div><ul class="links-of-blogroll-list"><li class="my-links-of-blogroll-li"><a href="/ARST打卡第34周-34-521/" title="ARST打卡第34周[34/521]-思考专家的意义" target="_blank">ARST打卡第34周[34/521]-思考专家的意义</a></li><li class="my-links-of-blogroll-li"><a href="/vector取size问题/" title="vector取size问题" target="_blank">vector取size问题</a></li><li class="my-links-of-blogroll-li"><a href="/SQL中因为null导致的空结果/" title="SQL中因为null导致的空结果" target="_blank">SQL中因为null导致的空结果</a></li><li class="my-links-of-blogroll-li"><a href="/Windows下导入导出数据库/" title="Windows下导入导出数据库" target="_blank">Windows下导入导出数据库</a></li><li class="my-links-of-blogroll-li"><a href="/ARST打卡第33周-33-521/" title="ARST打卡第33周[33/521]" target="_blank">ARST打卡第33周[33/521]</a></li></ul></div><div><canvas id="canvas" style="width:60%"></canvas></div><script>!function(){function t(t){var r=[];a.fillStyle="#005eac";var h=new Date,u=70,s=30,v=h.getHours(),g=Math.floor(v/10),m=v%10;r.push({num:g}),r.push({num:m}),r.push({num:10});var c=h.getMinutes(),g=Math.floor(c/10),m=c%10;r.push({num:g}),r.push({num:m}),r.push({num:10});var M=h.getSeconds(),g=Math.floor(M/10),m=M%10;r.push({num:g}),r.push({num:m});for(var p=0;p<r.length;p++)r[p].offsetX=u,u=f(u,s,r[p].num,t),p<r.length-1&&10!=r[p].num&&10!=r[p+1].num&&(u+=l);if(0==i.length)i=r;else for(var C=0;C<i.length;C++)i[C].num!=r[C].num&&(n(r[C]),i[C].num=r[C].num);return e(t),o(),h}function n(t){for(var n=t.num,e=m[n],o=0;o<e.length;o++)for(var f=0;f<e[o].length;f++)if(1==e[o][f]){var a={offsetX:t.offsetX+u+2*u*f,offsetY:30+u+2*u*o,color:g[Math.floor(Math.random()*g.length)],g:1.5+Math.random(),vx:4*Math.pow(-1,Math.ceil(10*Math.random()))+Math.random(),vy:-5};v.push(a)}}function e(t){for(var n=0;n<v.length;n++)t.beginPath(),t.fillStyle=v[n].color,t.arc(v[n].offsetX,v[n].offsetY,u,0,2*Math.PI),t.fill()}function o(){for(var t=0,n=0;n<v.length;n++){var e=v[n];e.offsetX+=e.vx,e.offsetY+=e.vy,e.vy+=e.g,e.offsetY>h-u&&(e.offsetY=h-u,e.vy=-e.vy*s),e.offsetX>u&&e.offsetX<r-u&&(v[t]=v[n],t++)}for(;t<v.length;t++)v.pop()}function f(t,n,e,o){for(var f=m[e],a=0;a<f.length;a++)for(var r=0;r<f[a].length;r++)1==f[a][r]&&(o.beginPath(),o.arc(t+u+2*u*r,n+u+2*u*a,u,0,2*Math.PI),o.fill());return o.beginPath(),t+=f[0].length*u*2}var a,r=820,h=250,u=7,l=10,s=.65,v=[];const g=["#33B5E5","#0099CC","#AA66CC","#9933CC","#99CC00","#669900","#FFBB33","#FF8800","#FF4444","#CC0000"];var i=[],m=[[[0,0,1,1,1,0,0],[0,1,1,0,1,1,0],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[0,1,1,0,1,1,0],[0,0,1,1,1,0,0]],[[0,0,0,1,1,0,0],[0,1,1,1,1,0,0],[0,0,0,1,1,0,0],[0,0,0,1,1,0,0],[0,0,0,1,1,0,0],[0,0,0,1,1,0,0],[0,0,0,1,1,0,0],[0,0,0,1,1,0,0],[0,0,0,1,1,0,0],[1,1,1,1,1,1,1]],[[0,1,1,1,1,1,0],[1,1,0,0,0,1,1],[0,0,0,0,0,1,1],[0,0,0,0,1,1,0],[0,0,0,1,1,0,0],[0,0,1,1,0,0,0],[0,1,1,0,0,0,0],[1,1,0,0,0,0,0],[1,1,0,0,0,1,1],[1,1,1,1,1,1,1]],[[1,1,1,1,1,1,1],[0,0,0,0,0,1,1],[0,0,0,0,1,1,0],[0,0,0,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,1,1,0],[0,0,0,0,0,1,1],[0,0,0,0,0,1,1],[1,1,0,0,0,1,1],[0,1,1,1,1,1,0]],[[0,0,0,0,1,1,0],[0,0,0,1,1,1,0],[0,0,1,1,1,1,0],[0,1,1,0,1,1,0],[1,1,0,0,1,1,0],[1,1,1,1,1,1,1],[0,0,0,0,1,1,0],[0,0,0,0,1,1,0],[0,0,0,0,1,1,0],[0,0,0,1,1,1,1]],[[1,1,1,1,1,1,1],[1,1,0,0,0,0,0],[1,1,0,0,0,0,0],[1,1,1,1,1,1,0],[0,0,0,0,0,1,1],[0,0,0,0,0,1,1],[0,0,0,0,0,1,1],[0,0,0,0,0,1,1],[1,1,0,0,0,1,1],[0,1,1,1,1,1,0]],[[0,0,0,0,1,1,0],[0,0,1,1,0,0,0],[0,1,1,0,0,0,0],[1,1,0,0,0,0,0],[1,1,0,1,1,1,0],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[0,1,1,1,1,1,0]],[[1,1,1,1,1,1,1],[1,1,0,0,0,1,1],[0,0,0,0,1,1,0],[0,0,0,0,1,1,0],[0,0,0,1,1,0,0],[0,0,0,1,1,0,0],[0,0,1,1,0,0,0],[0,0,1,1,0,0,0],[0,0,1,1,0,0,0],[0,0,1,1,0,0,0]],[[0,1,1,1,1,1,0],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[0,1,1,1,1,1,0],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[0,1,1,1,1,1,0]],[[0,1,1,1,1,1,0],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[0,1,1,1,0,1,1],[0,0,0,0,0,1,1],[0,0,0,0,0,1,1],[0,0,0,0,1,1,0],[0,0,0,1,1,0,0],[0,1,1,0,0,0,0]],[[0,0,0,0],[0,0,0,0],[0,1,1,0],[0,1,1,0],[0,0,0,0],[0,0,0,0],[0,1,1,0],[0,1,1,0],[0,0,0,0],[0,0,0,0]]],c=document.getElementById("canvas");c.width=r,c.height=h,a=c.getContext("2d");new Date;setInterval(function(){a.clearRect(0,0,a.canvas.width,a.canvas.height),t(a)},50)}()</script></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#ARST第二周-2-521"><span class="nav-number">1.</span> <span class="nav-text">ARST第二周(2/521)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Algorithm"><span class="nav-number">1.1.</span> <span class="nav-text">Algorithm:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Review-为了学习英文"><span class="nav-number">1.2.</span> <span class="nav-text">Review:(为了学习英文)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Tip-主要是为了总结和归纳你在是常工作中所遇到的知识点"><span class="nav-number">1.3.</span> <span class="nav-text">Tip:(主要是为了总结和归纳你在是常工作中所遇到的知识点)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Share："><span class="nav-number">1.4.</span> <span class="nav-text">Share：</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-基于上下文的自适应算术编码代码实现"><span class="nav-number">1.4.1.</span> <span class="nav-text">1.基于上下文的自适应算术编码代码实现</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-完全统计模型的算术编码代码实现"><span class="nav-number">1.4.2.</span> <span class="nav-text">2.完全统计模型的算术编码代码实现</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-完全统计模型的算术编码代码实现—无限长不报错版"><span class="nav-number">1.4.3.</span> <span class="nav-text">3.完全统计模型的算术编码代码实现—无限长不报错版</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#更新"><span class="nav-number">2.</span> <span class="nav-text">更新</span></a></li></ol></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2019</span> <span class="with-love"><i class="fa fa-heartbeat"></i> </span><span class="author" itemprop="copyrightHolder">单林敏</span> <a href="http://www.beian.miit.gov.cn/">湘ICP备19025607号</a></div><span id="sitetime"></span><script language="javascript">function siteTime(){window.setTimeout("siteTime()",1e3);var e=1e3,t=60*e,o=60*t,i=24*o,a=365*i,n=new Date,r=n.getFullYear(),l=n.getMonth()+1,s=n.getDate(),M=n.getHours(),g=n.getMinutes(),m=n.getSeconds(),T=Date.UTC(2019,6,8,15,10,0),f=Date.UTC(r,l,s,M,g,m),h=f-T,u=Math.floor(h/a),d=Math.floor(h/i-365*u),D=Math.floor((h-(365*u+d)*i)/o),c=Math.floor((h-(365*u+d)*i-D*o)/t),w=Math.floor((h-(365*u+d)*i-D*o-c*t)/e);document.getElementById("sitetime").innerHTML=" 我已经等了你"+d+" 天 "+D+" 小时 "+c+" 分钟 "+w+" 秒了啊"}siteTime()</script><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="site-uv">我亲爱的第<i class="fa fa-user"></i> <span class="busuanzi-value" id="busuanzi_value_site_uv"></span> 位朋友 </span><span class="site-pv">感谢这是第<i class="fa fa-eye"></i> <span class="busuanzi-value" id="busuanzi_value_site_pv"></span> 次相见</span></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span id="scrollpercent"><span>0</span>%</span></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery@2.1.3/dist/jquery.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/fastclick/1.0.6/fastclick.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/jquery.lazyload/1.9.3/jquery.lazyload.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/velocity-animate@1.2.1/velocity.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/npm/velocity-animate@1.2.1/velocity.ui.min.js"></script><script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script id="ribbon" type="text/javascript" size="300" alpha="0.6" zindex="-1" src="/lib/canvas-ribbon/canvas-ribbon.js"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="/js/src/Valine.min.js"></script><script type="text/javascript">if(new Valine({lang:"zh-cn",admin_email:"862445752@qq.com",el:"#comments",appId:"1aeYDQsREhR3KTIo4siMtHf5-MdYXbMMI",appKey:"Xr14yM2uIvy2dIFwiMKclIa0",emoticon_url:"https://cloud.panjunwen.com/alu",emoticon_list:["吐.png","喷血.png","狂汗.png","不说话.png","汗.png","坐等.png","献花.png","不高兴.png","中刀.png","害羞.png","皱眉.png","小眼睛.png","中指.png","尴尬.png","瞅你.png","想一想.png","中枪.png","得意.png","肿包.png","扇耳光.png","亲亲.png","惊喜.png","脸红.png","无所谓.png","便便.png","愤怒.png","蜡烛.png","献黄瓜.png","内伤.png","投降.png","观察.png","看不见.png","击掌.png","抠鼻.png","邪恶.png","看热闹.png","口水.png","抽烟.png","锁眉.png","装大款.png","吐舌.png","无奈.png","长草.png","赞一个.png","呲牙.png","无语.png","阴暗.png","不出所料.png","咽气.png","期待.png","高兴.png","吐血倒地.png","哭泣.png","欢呼.png","黑线.png","喜极而泣.png","喷水.png","深思.png","鼓掌.png","暗地观察.png"],placeholder:"&#x270d;写评论"}),window.location.hash)var checkExist=setInterval(function(){$(window.location.hash).length&&($("html, body").animate({scrollTop:$(window.location.hash).offset().top-90},1e3),clearInterval(checkExist))},100)</script><script type="text/javascript">function proceedsearch(){$("body").append('<div class="search-popup-overlay local-search-pop-overlay"></div>').css("overflow","hidden"),$(".search-popup-overlay").click(onPopupClose),$(".popup").toggle();var t=$("#local-search-input");t.attr("autocapitalize","none"),t.attr("autocorrect","off"),t.focus()}var isfetched=!1,isXml=!0,search_path="search.xml";0===search_path.length?search_path="search.xml":/json$/i.test(search_path)&&(isXml=!1);var path="/"+search_path,onPopupClose=function(t){$(".popup").hide(),$("#local-search-input").val(""),$(".search-result-list").remove(),$("#no-result").remove(),$(".local-search-pop-overlay").remove(),$("body").css("overflow","")},searchFunc=function(t,e,o){"use strict";$("body").append('<div class="search-popup-overlay local-search-pop-overlay"><div id="search-loading-icon"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div>').css("overflow","hidden"),$("#search-loading-icon").css("margin","20% auto 0 auto").css("text-align","center"),$.ajax({url:t,dataType:isXml?"xml":"json",async:!0,success:function(t){isfetched=!0,$(".popup").detach().appendTo(".header-inner");var n=isXml?$("entry",t).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get():t,r=document.getElementById(e),s=document.getElementById(o),a=function(){var t=r.value.trim().toLowerCase(),e=t.split(/[\s\-]+/);e.length>1&&e.push(t);var o=[];if(t.length>0&&n.forEach(function(n){function r(e,o,n,r){for(var s=r[r.length-1],a=s.position,i=s.word,l=[],h=0;a+i.length<=n&&0!=r.length;){i===t&&h++,l.push({position:a,length:i.length});var p=a+i.length;for(r.pop();0!=r.length&&(s=r[r.length-1],a=s.position,i=s.word,p>a);)r.pop()}return c+=h,{hits:l,start:o,end:n,searchTextCount:h}}function s(t,e){var o="",n=e.start;return e.hits.forEach(function(e){o+=t.substring(n,e.position);var r=e.position+e.length;o+='<b class="search-keyword">'+t.substring(e.position,r)+"</b>",n=r}),o+=t.substring(n,e.end)}var a=!1,i=0,c=0,l=n.title.trim(),h=l.toLowerCase(),p=n.content.trim().replace(/<[^>]+>/g,""),u=p.toLowerCase(),f=decodeURIComponent(n.url),d=[],g=[];if(""!=l&&(e.forEach(function(t){function e(t,e,o){var n=t.length;if(0===n)return[];var r=0,s=[],a=[];for(o||(e=e.toLowerCase(),t=t.toLowerCase());(s=e.indexOf(t,r))>-1;)a.push({position:s,word:t}),r=s+n;return a}d=d.concat(e(t,h,!1)),g=g.concat(e(t,u,!1))}),(d.length>0||g.length>0)&&(a=!0,i=d.length+g.length)),a){[d,g].forEach(function(t){t.sort(function(t,e){return e.position!==t.position?e.position-t.position:t.word.length-e.word.length})});var v=[];0!=d.length&&v.push(r(l,0,l.length,d));for(var $=[];0!=g.length;){var C=g[g.length-1],m=C.position,x=C.word,w=m-20,y=m+80;0>w&&(w=0),y<m+x.length&&(y=m+x.length),y>p.length&&(y=p.length),$.push(r(p,w,y,g))}$.sort(function(t,e){return t.searchTextCount!==e.searchTextCount?e.searchTextCount-t.searchTextCount:t.hits.length!==e.hits.length?e.hits.length-t.hits.length:t.start-e.start});var T=parseInt("1");T>=0&&($=$.slice(0,T));var b="";b+=0!=v.length?"<li><a href='"+f+"' class='search-result-title'>"+s(l,v[0])+"</a>":"<li><a href='"+f+"' class='search-result-title'>"+l+"</a>",$.forEach(function(t){b+="<a href='"+f+'\'><p class="search-result">'+s(p,t)+"...</p></a>"}),b+="</li>",o.push({item:b,searchTextCount:c,hitCount:i,id:o.length})}}),1===e.length&&""===e[0])s.innerHTML='<div id="no-result"><i class="fa fa-search fa-5x" /></div>';else if(0===o.length)s.innerHTML='<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>';else{o.sort(function(t,e){return t.searchTextCount!==e.searchTextCount?e.searchTextCount-t.searchTextCount:t.hitCount!==e.hitCount?e.hitCount-t.hitCount:e.id-t.id});var a='<ul class="search-result-list">';o.forEach(function(t){a+=t.item}),a+="</ul>",s.innerHTML=a}};r.addEventListener("input",a),$(".local-search-pop-overlay").remove(),$("body").css("overflow",""),proceedsearch()}})};$(".popup-trigger").click(function(t){t.stopPropagation(),isfetched===!1?searchFunc(path,"local-search-input","local-search-result"):proceedsearch()}),$(".popup-btn-close").click(onPopupClose),$(".popup").click(function(t){t.stopPropagation()}),$(document).on("keyup",function(t){var e=27===t.which&&$(".search-popup").is(":visible");e&&onPopupClose()})</script><script>!function(){var t=document.createElement("script"),s=window.location.protocol.split(":")[0];"https"===s?t.src="https://zz.bdstatic.com/linksubmit/push.js":t.src="http://push.zhanzhang.baidu.com/push.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()</script><script type="text/javascript" align="center">wpac_init=window.wpac_init||[],wpac_init.push({widget:"Rating",id:21280,el:"wpac-rating",color:"ff9800"}),function(){if(!("WIDGETPACK_LOADED"in window)){WIDGETPACK_LOADED=!0;var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//embed.widgetpack.com/widget.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t.nextSibling)}}()</script><script type="text/x-mathjax-config">MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });</script><script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script><script src="/js/cursor/love.min.js"></script><script src="/js/src/activate-power-mode.min.js"></script><script>POWERMODE.colorful=!0,POWERMODE.shake=!1,document.body.addEventListener("input",POWERMODE)</script><script async src="/live2d-widget/autoload.js"></script><script type="text/javascript" src="/js/src/clipboard.min.js"></script><script type="text/javascript" src="/js/src/clipboard-use.js"></script><link rel="stylesheet" href="/sharejs/css/share.min.css"><script src="/sharejs/js/social-share.min.js"></script></body></html><!-- rebuild by neat -->